!function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="dist/",t(0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=r(1),i=r(2),a=o(i),s=new a["default"]({});onmessage=function(e){var t=e.data,r=t[0],o=t[1];switch(r){case n.PARSE:var i=s.parse(o),a=i.error;a?postMessage([n.ERROR,a]):postMessage([n.PARSE,i]);break;case n.RESIZE:s.resize(o)}},postMessage([n.READY])},function(e,t){"use strict";t.__esModule=!0;t.MODE_NONE=null,t.MODE_LIST="l",t.MODE_REPLACE="r",t.PARSE="P",t.RESIZE="S",t.ERROR="E",t.READY="R",t.BOX_NONE=null,t.BOX_NAV="N",t.BOX_FLAGS="F",t.BOX_MODES="M"},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.replace(u,p)}t.__esModule=!0;var a=r(1),s=r(3),c=o(s),u=/\\n/g,p="\n",l=/\$[&0-9]/g,h=function(){function e(t){n(this,e),this.coordinates=new c["default"](t),this._lastParams=null,this._lastExec=null}return e.prototype.resize=function(e){this.coordinates.resize(e)},e.prototype.parse=function(e){var t={matches:[],output:"",error:null},r=e.source,o=e.flags;if(!r)return t;var n=null;try{n=new RegExp(r,o)}catch(s){return t.error=s.message,t}if(!n)return t;var c=e.input;if(!c)return t;var u=e.mode;if(!u){var p=this._exec(n,c),h=p.matches;return t.matches=h,t}var d=i(e.resolve||"");if(u===a.MODE_LIST){var f=d.match(l);if(!f||f.length<1){var v=this._execAndJoinList(n,c,d),_=v.matches,x=v.output;return t.matches=_,t.output=x,t}for(var b,g,y,m=[],E=0,O=f.length;E<O;E++)b=f[E],g=b.substr(1,1),y="&"===g?0:Number(g),m[y]=b;var R=this._execAndReplaceList(n,c,d,m),M=R.matches,A=R.output;return t.matches=M,t.output=A,t}var w=this._execAndReplace(n,c,d),P=w.matches,j=w.output;return t.matches=P,t.output=j,t},e.prototype._exec=function(e,t){this.coordinates.hold(t);var r=[];if(e.global)for(var o=void 0,n=void 0,i=void 0;;){if(o=e.exec(t),i=o&&o[0],!i)break;n=this.coordinates.compute(o.index,i.length),r.push(Object.assign({value:i,subs:o.slice(1)},n))}else{var a=e.exec(t),s=a&&a[0];if(s){var c=this.coordinates.compute(a.index,s.length);r.push(Object.assign({value:s,subs:a.slice(1)},c))}}return{matches:r}},e.prototype._execAndJoinList=function(e,t,r){this.coordinates.hold(t);for(var o=[],n="",i=void 0,a=void 0,s=void 0;;){if(i=e.exec(t),s=i&&i[0],!s)break;a=this.coordinates.compute(i.index,s.length),o.push(Object.assign({value:s,subs:i.slice(1)},a)),n+=s+r}return{matches:o,output:n}},e.prototype._execAndReplaceList=function(e,t,r,o){this.coordinates.hold(t);for(var n=[],i="",a=void 0,s=void 0,c=void 0,u=void 0;;){if(a=e.exec(t),!a||!a[0])break;c=a[0],s=this.coordinates.compute(a.index,c.length),n.push(Object.assign({value:c,subs:a.slice(1)},s)),u=r,o.forEach(function(e,t){void 0!==a[t]&&(u=u.replace(e,a[t]))}),i+=u}return{matches:n,output:i}},e.prototype._execAndReplace=function(e,t,r){this.coordinates.hold(t);for(var o=[],n=void 0,i=void 0,a=void 0;;){if(n=e.exec(t),a=n&&n[0],!a)break;i=this.coordinates.compute(n.index,a.length),o.push(Object.assign({value:a,subs:n.slice(1)},i))}var s=t.replace(e,r);return{matches:o,output:s}},e}();t["default"]=h},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}t.__esModule=!0;var a=/\n/g,s=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=i=o(this,e.call.apply(e,[this].concat(c))),i.options={},i._paraIndex=0,a=n,o(i,a)}return n(t,e),t.prototype.resize=function(e){var t=e.charWidth,r=e.paddingLeft,o=e.paddingRight,n=e.canvasWidth;e.charsPeerLine=Math.floor((n-r-o)/t),this.options=e},t.prototype.hold=function(e){if(this._clear(),e)for(var t=this.options.charsPeerLine,r=1,o=this[0],n=void 0,i=void 0,s=void 0,c=void 0,u=void 0;;){if(n=a.exec(e),!n)break;i=n.index,s=i-o.index,s<=1?(c=1,u=0):(c=Math.ceil((s-1)/t),u=(s-1)%t,0===u&&(u=t)),o={index:i,para:o.para+r,line:o.line+c,col:u},this.push(o)}},t.prototype.compute=function(e,t){for(var r=this.length-1,o=void 0;this._paraIndex<r&&(o=this[this._paraIndex+1],!(o.index>e));)this._paraIndex++;var n=this.options,i=n.charWidth,a=n.charHeight,s=n.charsPeerLine,c=this[this._paraIndex],u=e-c.index,p=Math.ceil(u/s),l=u%s;l=(0===l?s:l)-1;var h=c.para+1,d=c.line+p,f=void 0;if(l+t<s)f=[[i*l,a*d,i*t,a]];else{var v=s-l;f=[[i*l,a*d,i*v,a]];var _=t-v,x=Math.floor(_/s),b=d+1;x>0&&(f.push([0,a*b,i*s,a*x]),b+=x);var g=_%s;f.push([0,a*b,i*g,a])}return{index:e,para:h,line:d,col:l,xywhs:f}},t.prototype._clear=function(){this.splice(0,this.length,{index:-1,para:-1,col:-1,line:-1}),this._paraIndex=0},t}(i(Array));t["default"]=s}]);
//# sourceMappingURL=worker.4adefa.js.map